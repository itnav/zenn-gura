---
title: '第3章：マップとロボットの作成'
---

## マップとロボットの作成

いよいよ、3D 迷路のマップとロボットを作成します！\
実際にコードを書いて、ロボットを動かしてみましょう。

<br />

## 必要なフォルダとファイルを作成する

まずは、マップとロボットを作成するためのファイルを作成します！

VSCode の下のパネルに「ターミナル」が表示されていることを確認してください！\
もし表示されていなければ、以下のショートカットキーでターミナルを開きます！

- **Windows(日本語配列) の場合**: `Ctrl + shift + @`
- **Mac(日本語配列) の場合**: `Cmd + shift + @`

お使いのパソコンに合わせて、以下のコマンドをコピーしてターミナルに貼り付け、Enter キーを押してください！

**Windows の場合**

```bash
mkdir map-1
type nul > map-1/ai-route-prompt.js
type nul > map-1/index.html
type nul > map-1/map.js
type nul > map-1/style.css
```

**Mac の場合**

```bash
mkdir map-1
touch map-1/ai-route-prompt.js map-1/index.html map-1/map.js map-1/style.css
```

コマンドを実行すると、一気に左側のファイル一覧に新しいファイルとフォルダが表示されます。これで冒険の準備は完了です！

---

> 作成されたフォルダとファイルが表示されている VSCode のサイドバー

---

<br />

## コードを記述する

それでは、コードを記述していきましょう！

### index.html

:::details ファイルの中身（コピー&ペースト）

```html
<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>AI ロボット宝探しゲーム - マップ 1</title>
        <link rel="stylesheet" href="./style.css" />
    </head>
    <body>
        <div id="container">
            <h1>🤖 AI ロボット宝探しゲーム - マップ 1</h1>
            <div id="controls">
                <button id="startButton">スタート</button>
                <button id="resetButton">リセット</button>
            </div>
            <div id="canvas-container"></div>
            <div id="status"></div>
        </div>

        <!-- Three.js （3D ライブラリ） -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

        <!-- ゲームのスクリプト -->
        <script type="module" src="../game.js"></script>
    </body>
</html>
```

:::

### style.css

:::details ファイルの中身（コピー&ペースト）

```css
html,
body {
    margin: 0;
}

body {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    min-height: 100svh;
    background-color: #fef3c7;
}

#game-viewer {
    width: 80vw;
    height: 80vh;
    border-radius: 24px;
    margin-bottom: 24px;
    overflow: hidden;
    box-shadow:
        0 10px 25px -5px rgba(0, 0, 0, 0.1),
        0 8px 10px -6px rgba(0, 0, 0, 0.1);
}

#start-button {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 10px 16px;
    font-size: 14px;
    border-radius: 6px;
    background-color: #d97706;
    border: 1px solid rgba(16, 185, 129, 0.1);
    color: #fff;
    font-weight: 500;
}
#start-button:hover {
    background-color: #b45309;
}
#start-button:active {
    background-color: #92400e;
}
```

:::

### map.js

:::details ファイルの中身（コピー&ペースト）

```javascript
/**
 * 現在のマップの設定オブジェクトです。
 *
 * このオブジェクトのプロパティ値を変更することで、\
 * マップのレイアウト、スタート/エンド位置、罠の位置を変更できます。
 *
 * @type {import("../game").MapConfig}
 */
export const mapConfig = {
    layout: [
        ['s', 'n', 'n', 'n', 'n', 'n'],
        ['n', 'n', 't', 'n', 'n', 'n'],
        ['n', 'n', 'o', 'n', 'n', 'n'],
        ['n', 'n', 'n', 't', 'n', 'n'],
        ['n', 'n', 'n', 'n', 'n', 'n'],
        ['o', 'n', 'n', 'n', 'n', 'e'],
    ],
    cell: {
        s: {
            type: 'start',
            color: '#6B7ADB',
        },
        e: {
            type: 'end',
            color: '#F59E0B',
        },
        t: {
            type: 'trap',
            color: '#DC2626',
        },
        o: {
            type: 'object',
            color: '#92400E',
        },
        n: {
            type: 'normal',
            color: '#D4A574',
        },
    },
};
```

:::

### ai-route-prompt.js

:::details ファイルの中身（コピー&ペースト）

```javascript
export const routePrompt = `
    ここに AI ロボットへの指示を書きます！
`;
```

:::

<br />

## ゲームを確認してみる

ここまでできたら、一度ゲームを確認してみましょう！

### 1. すべてのファイルを保存

まずは全てのファイルが保存されているか確認しましょう！

---

> すべてのファイルが保存されている VSCode のスクリーンショット

---

上のタブのファイル名の右端に ⚪️ がついている場合はセーブされていないことを示しています。

### 2. VSCode の「Go Live」ボタンをクリック

続いて、VSCode の右下の「Go Live」ボタンをクリックします。

---

> Go Live ボタンの位置を示す VSCode のスクリーンショット

---

:::message
「Go Live」ボタンが見つからない場合は、拡張機能「Live Server」がインストールされていない可能性があります。スタッフに声をかけてください。
:::

### 3. ブラウザで「map-1」フォルダを選択

---

> ブラウザでファイル一覧が表示されている画面のスクリーンショット

---

map-1 フォルダをクリックすると...

---

> 3D 迷路が表示されたゲーム画面のスクリーンショット

---

3D 迷路が表示されたら成功です。🎉

<br />

## 画面の説明

---

> ゲーム画面の各要素 （ロボット、スタート、ゴール、トラップ、通路） を矢印で示した注釈付きスクリーンショット

---

- **青い箱**: これがあなたのロボットです
- **緑のマス**: スタート地点
- **赤のマス**: ゴール地点 （宝物がある場所）
- **黒いマス**: トラップ （通ると失敗）
- **グレーのマス**: 壁 （通れない）
- **薄いグレーのマス**: 通路 （通れる）

<br />

## よくあるエラーと対処法

もしエラーが出た場合は、以下を確認してください。

### パターン１： 画面が真っ白

---

> 真っ白な画面のスクリーンショット

---

**原因**: ファイルパスが間違っている
**対処法**:

- style.css のパスが `./style.css` になっているか確認
- game.js のパスが `../game.js` になっているか確認

### パターン２： 3D 表示されない

---

> エラーコンソールのスクリーンショット

---

**原因**: JavaScript エラー
**対処法**:

1. F12 キーでコンソールを開く
2. 赤いエラーメッセージを確認
3. スペルミスがないか確認

### パターン３： Go Live が動かない

**原因**: ポート番号の競合
**対処法**: VSCode を再起動

---
