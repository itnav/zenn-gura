---
title: '第2章： ゲーム基盤作成'
---

# ゲーム基盤作成

それでは、さっそくゲーム基盤を作成していきましょう！\
ゲーム基盤とは、ゲームの骨組みのことです。これらのファイルは、基本的にコードをコピペして使います。

<br />

## 配布されたファイルを確認する

VSCode の左側のファイル一覧を見てください。以下のファイルがあることを確認しましょう。

---

> VSCode のファイル一覧にゲーム基盤ファイルが表示されている画面

---

### ゲーム基盤ファイルの一覧

プロジェクトのルート（一番上の階層）にあるファイル。

-   **game.js** - 3D 迷路を表示するプログラム
-   **ai-fetch.js** - AI と通信するプログラム
-   **ai-system-prompt.js** - AI の基本設定
-   **secret.js** - API キーの設定ファイル （ひな形）

:::message
これらのファイルは、プロのエンジニアが作った完成品です。中身を変更する必要はありません。そのまま使いましょう。
:::

<br />

## 各ファイルの役割

それぞれのファイルがどんな仕事をしているか、簡単に説明します。

### game.js （3D グラフィックス）

3D 迷路を画面に表示するファイルです。Three.js というライブラリを使っています。

---

> 2D の配列データが 3D 迷路に変換される様子を示す図

---

このファイルがやっていること。

-   立方体 （箱） を作る
-   カメラの位置を設定
-   光源を配置
-   ロボットの動きをアニメーション
-   ゲーム全体のコントロール

### ai-fetch.js （API 通信）

ChatGPT API と通信するファイルです。

---

> ai-fetch.js の通信の流れ （指示送信 → API → 返答受信） を示す図

---

処理の流れ。

1.  みなさんの指示を受け取る
2.  ChatGPT API に送信
3.  AI の返答を受け取る
4.  ロボットが理解できる形に変換

### ai-system-prompt.js （AI 設定）

AI ロボットの「性格」や「ルール」を決めるファイルです。

---

> AI ロボットのキャラクター設定画面のイメージ

---

設定内容。

-   ロボットができること （前進、右回転、左回転）
-   マップの説明方法
-   返答の形式 （JSON 形式）
-   エラー時の対応

### secret.example.js （API キーのひな形）

API キーを設定するためのテンプレートファイルです。

:::details コードをコピペする

```javascript
/** OpenAI APIキー */
export const OPENAI_API_KEY = 'YOUR_OPENAI_API_KEY_HERE';
```

:::

このファイルをコピーして、実際の API キーを入力します （詳しくは第 4 章で説明） 。

<br />

## map フォルダの中身

map-1 と map-2 フォルダの中にも、それぞれファイルがあります。

-   **index.html** - ゲームの HTML ファイル
-   **map.js** - マップのデータ
-   **style.css** - そのマップ専用のスタイル
-   **ai-route-prompt.js** - AI への指示を書くファイル

---

> map フォルダの構造を示す図

---

<br />

## なぜ完成品を使うのか？

今回のワークショップでは、これらの基本ファイルは変更しません。理由は以下の通りです。

1.  **複雑すぎる**

    -   プロが作った高度なコード
    -   理解するには時間がかかりすぎる

2.  **本質に集中**

    -   AI への指示の出し方が今日の本題
    -   マップ作りで創造性を発揮

3.  **安定性**
    -   完成品なのでバグが少ない
    -   確実に動作する

:::details 【深く知りたい人向け】使用技術について

-   **Three.js**: WebGL を使った 3D グラフィックスライブラリ
-   **ES6 モジュール**: JavaScript の最新の書き方
-   **async/await**: 非同期処理の仕組み
-   **Fetch API**: HTTP リクエストを送る仕組み

これらの技術に興味がある人は、ワークショップ後に調べてみてください。
:::

<br />

## ファイルの確認方法

ファイルの中身を見たい場合は、VSCode で開いて確認できます。

1.  左側のファイル一覧でファイル名をクリック
2.  右側にコードが表示される
3.  読むだけで、変更はしない

---

> VSCode でファイルを開いた状態のスクリーンショット

---

:::message alert
基本ファイルは変更しないでください。もし間違って変更してしまった場合は、先生に声をかけてください。
:::

<br />

## まとめ

これらの基本ファイルが協力して、3D ゲームが動いています。

1.  **game.js** → 3D 迷路を表示、ゲーム全体をコントロール
2.  **ai-fetch.js** → AI と通信
3.  **ai-system-prompt.js** → AI の設定
4.  **secret.example.js** → API キーのひな形

次の章では、いよいよマップとロボットを作成していきます。

---

<br />

## 本チャプター終了時点の理解度チェック

-   [ ] game.js が 3D 表示を担当していることを理解した
-   [ ] ai-fetch.js が AI との通信を担当していることを理解した
-   [ ] ai-system-prompt.js が AI の基本設定であることを理解した
-   [ ] 基本ファイルは変更しない理由を理解した

チェックがつけば、次の章に進む準備は万端です。
