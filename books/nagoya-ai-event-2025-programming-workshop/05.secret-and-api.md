---
title: '第4章： ChatGPT API'
---

# ChatGPT API

AI ロボットと通信するために、API キーを設定します！\
また、ChatGPT API の仕組みについても学びましょう！

<br />

## API とは？

API キーは、ChatGPT を使うための「入場券」のようなものです。

---

> APIキーを遊園地の入場券に例えたイラスト

---

API キーを使うと、自分のパソコンから直接 ChatGPT を呼び出すことができるようになります。

<br />

## API でできること

- **自分のアプリから ChatGPT を使える**
    - Web ブラウザを開かなくても ChatGPT と会話できます
    - 自分が作ったゲームやアプリに AI 機能を追加できます

- **プログラムでカスタマイズできる**
    - JavaScript のコードから ChatGPT に質問を送れます
    - AI の返答を受け取って、ゲームの動作に反映できます

- **カスタマイズができる**
    - AI の性格や返答の形式を自由に設定できます
    - 今回のゲームでは、ロボットを動かす命令を返すように設定しています

:::message alert
API キーは大切なパスワードです。他の人に見せたり、インターネットに公開したりしないでください。
:::

<br />

## secret.js を作成する

API キーを設定します！

```javascript:./secret.js
export const OPENAI_API_KEY = 'sk-ここに配布されたAPIキーを入力';
```

先生から配布された API キーをコピーして、`'sk-ここに配布されたAPIキーを入力'`の部分を置き換えてください！

:::message
API キーは「sk-」で始まる長い文字列です。全部コピーして貼り付けてください。
:::

<br />

## ChatGPT APIとは？

私たちが使う ChatGPT API について、詳しく説明します！

---

> ChatGPT APIの仕組みを示す図解（アプリ → API → ChatGPT → 返答）

---

### APIとは

**API**（エーピーアイ）は「Application Programming Interface」の略で、プログラム同士が会話するための仕組みです！

身近な例で説明します。

---

> レストランの注文システムに例えたAPIの説明図

---

1.  **お客さん**（私たちのゲーム）
2.  **ウェイター**（API）
3.  **シェフ**（ChatGPT）
4.  **料理**（AIの返答）

ウェイターがお客さんの注文をシェフに伝えて、料理を運んでくるように、API が私たちの質問を ChatGPT に伝えて、答えを返してくれます。

### ChatGPTとは

ChatGPT は、OpenAI 社が作った対話型の AI です。

---

> ChatGPTの特徴を示すイラスト（対話、多言語、プログラミング）

---

ChatGPT ができること。

- 自然な会話
- 質問への回答
- プログラムの生成
- 翻訳や要約
- 創造的な文章作成

<br />

## ゲームでのAPIの使われ方

私たちのゲームでは、以下のような流れで API を使います。

### 1. 指示を送る

```javascript
// みなさんが書いた指示
const routePrompt = `
    スタートから赤いゴールまで行ってください。
    黒いトラップは避けてください。
`;
```

### 2. AIが考える

---

> AIが迷路を分析している様子のイメージ図

---

ChatGPT が指示を理解して、最適なルートを計算します。

### 3. 命令を返す

```javascript
// AIからの返答
{
  "commands": ["r", "r", "l", "l", "t"]
}
```

### 4. ロボットが動く

---

> ロボットが命令通りに動く様子の GIF アニメーション

---

### もしエラーが出たら

**エラー例1**: `Invalid API key`

- **原因**: API キーが間違っている
- **対処法**: コピー&ペーストをやり直す

**エラー例2**: `secret.js not found`

- **原因**: ファイル名が間違っている
- **対処法**: `secret.js`という名前か確認

**エラー例3**: `Unexpected token`

- **原因**: クォート（'）が抜けている
- **対処法**: コードを見直す

<br />

## まとめ

このチャプターで学んだこと。

1.  **API キー**は、ChatGPT を使うための入場券
2.  **secret.js**で、API キーを設定する
3.  **ChatGPT API**で、プログラム同士が会話できる
4.  **従量課金制**で、使った分だけ料金がかかる

これで、AI ロボットと通信する準備が整いました！\
次の章では、いよいよ AI について学んで、ロボットに指示を出してみます！

<br />

## 本チャプター終了時点の状態

後で作成する...
