---
title: '🩷 オリジナルマップを作ろう'
---

## オリジナルマップを作ろう

お疲れ様でした！基本的なゲームの作り方はマスターできましたね！

ここからは、応用編です。これまで作ってきたマップを元に、自分だけのオリジナルマップ作りに挑戦してみましょう！

<br />

## 新しいマップフォルダを作成する

まずは、元となるマップをコピーして、アレンジするためのフォルダ `map-original` を作成します。

VSCode の下のパネルに「ターミナル」が表示されていることを確認してください！
もし表示されていなければ、以下のショートカットキーでターミナルを開きます！

- **Windows の場合**: `Ctrl + j`
- **Mac の場合**: `⌘ (Command) + j`

お使いのパソコンに合わせて、以下のコマンドをコピーしてターミナルに貼り付け、Enter キーを押してください！

**PowerShell(Windows) の場合**

```powershell
New-Item -ItemType Directory -Name "map-original"
Copy-Item -Path "map-1/*" -Destination "map-original/" -Recurse
```

:::details コマンドプロンプト(Windows) の場合

```bash
mkdir map-original
copy map-1\* map-original/
```

:::

:::details シェル(Mac,Linux) の場合

```bash
mkdir map-original
cp map-1/* map-original/
```

:::

:::details 【深く知りたい人向け】コマンドの解説

**PowerShell**

- `New-Item -ItemType Directory`: 新しいフォルダを作成
- `Copy-Item`: ファイルやフォルダをコピー
  - `-Path "map-1/*"`: map-1 フォルダ内のすべてのファイルを指定
  - `-Destination`: コピー先を指定
  - `-Recurse`: サブフォルダも含めてコピー

<br />

**コマンドプロンプト**

- `mkdir`: 新しいフォルダを作成
- `copy`: ファイルをコピー
  - `map-1\*`: map-1 フォルダ内のすべてのファイル
  - `map-original/`: コピー先のフォルダ

<br />

**シェル（Mac/Linux）**

- `mkdir`: 新しいフォルダを作成
- `cp`: ファイルをコピー（copy）
  - `map-1/*`: map-1 フォルダ内のすべてのファイル（\*はワイルドカード）
  - `map-original/`: コピー先のフォルダ

:::

<br />

## マップの仕組みを理解しよう

`map-original` フォルダの `map.js` ファイルを開いて、マップがどのような仕組みでできているか見てみましょう。

```javascript:map-original/map.js
/**
 * マップの設定オブジェクトです。
 *
 * このオブジェクトのプロパティ値を変更することで、
 * マップのレイアウト、スタートやエンド、トラップやオブジェクトの位置を変更できます。
 *
 * @type {import("../game").MapConfig}
 */
export const mapConfig = {
  cell: {
    s: {
      type: 'start',
      color: '#6B7ADB',
      description: 'スタート地点',
    },
    e: {
      type: 'end',
      color: '#F59E0B',
      description: 'お宝の場所',
    },
    t: {
      type: 'trap',
      color: '#DC2626',
      description: 'トラップ',
    },
    o: {
      type: 'object',
      color: '#92400E',
      description: 'オブジェクト（土管）',
    },
    '.': {
      type: 'normal',
      color: '#D4A574',
    },
  },
  layout: [
    ['s', '.', '.', '.', '.', 't'],
    ['.', '.', 'o', '.', '.', '.'],
    ['.', '.', '.', '.', '.', '.'],
    ['.', '.', '.', 't', '.', '.'],
    ['.', '.', '.', '.', '.', '.'],
    ['o', '.', '.', '.', '.', 'e'],
  ],
};
```

マップは `cell` と `layout` の 2 つの要素で構成されています。

- **`cell`**: マップに配置する「部品」の種類を決めるところです。
- **`layout`**: `cell` で決めた部品を、実際に地図のように並べるところです。

`cell` で「`s` はスタート地点」「`.` は道」のように部品の役割を決めておき、`layout` でその部品（記号）を並べてマップの形を作っている、とイメージすると分かりやすいでしょう！

<br />

## マップデータを編集する

それでは、実際にマップデータを編集してみましょう！

例えば、道 `.` の一つを壁 `o` に変えるだけでも、AI が通れない道ができて、ルートが大きく変わります。

`layout` の中にある `.` を、どこか一つ `o` に書き換えてみましょう。\
どこを変えるかで、AI の動きがどう変わるか、ぜひ試してみてください！

このように、少し変えるだけでもマップの構造が変わります。\
ぜひ、自分だけのマップ作りに挑戦してみてください！

<br />

## オリジナルマップのアイデア

まずは、どんなマップを作りたいか、アイデアを考えてみましょう！

### アイデアの例

1. **障害物マップ**

   - トラップがたくさんある
   - 安全な道は少ない
   - 慎重な進行が必要

2. **シンプルマップ**

   - 5×5 程度の小さめのマップ
   - ゴールまでの道が分かりやすい
   - 初心者向け

3. **巨大マップ**

   - 12×12 以上の大きなマップ
   - 複数のルートがある
   - 迷いやすい構造

<br />

## トラブルシューティング

何か問題が発生した場合は、以下を参考にしてください！

:::details A. マップが表示されない

**原因**: `map.js` の記号と定義が一致していない可能性があります。

**対処法**: `layout` で使っている記号（例: `'w'`）が、`cell` で定義されているか確認してください。ブラウザの開発者ツール（F12 キーで開けます）の「コンソール」タブでエラーメッセージを確認し、どの記号が問題か特定しましょう。

:::

:::details B. 巨大マップでブラウザが重い

**原因**: マップサイズが大きすぎて、パソコンの処理が追いついていない可能性があります。

**対処法**: 「まずは小さいマップで試してから、徐々に大きくしていこう」とアドバイスしてみてください。20x20 マス程度を上限の目安として伝えると良いでしょう。

:::
