---
title: '🩷 オリジナルマップを作ろう'
---

## オリジナルマップを作ろう

お疲れ様でした！基本的なゲームの作り方はマスターできましたね！

ここからは、応用編です。これまで作ってきたマップを元に、自分だけのオリジナルマップ作りに挑戦してみましょう！

<br />

## 新しいマップフォルダを作成する

まずは、元となるマップをコピーして、アレンジするためのフォルダ `map-original` を作成します。

VSCode の下のパネルに「ターミナル」が表示されていることを確認してください！
もし表示されていなければ、以下のショートカットキーでターミナルを開きます！

- **Windows の場合**: `Ctrl + j`
- **Mac の場合**: `⌘ (Command) + j`

お使いのパソコンに合わせて、以下のコマンドをコピーしてターミナルに貼り付け、Enter キーを押してください！

**PowerShell(Windows) の場合**

```powershell
New-Item -ItemType Directory -Name "map-original"
Copy-Item -Path "map-1/*" -Destination "map-original/" -Recurse
```

:::details コマンドプロンプト(Windows) の場合

```bash
mkdir map-original
copy map-1\* map-original/
```

:::

:::details シェル(Mac,Linux) の場合

```bash
mkdir map-original
cp map-1/* map-original/
```

:::

:::details 【深く知りたい人向け】コマンドの解説

**PowerShell**

- `New-Item -ItemType Directory`: 新しいフォルダを作成
- `Copy-Item`: ファイルやフォルダをコピー
  - `-Path "map-1/*"`: map-1 フォルダ内のすべてのファイルを指定
  - `-Destination`: コピー先を指定
  - `-Recurse`: サブフォルダも含めてコピー

<br />

**コマンドプロンプト**

- `mkdir`: 新しいフォルダを作成
- `copy`: ファイルをコピー
  - `map-1\*`: map-1 フォルダ内のすべてのファイル
  - `map-original/`: コピー先のフォルダ

<br />

**シェル（Mac/Linux）**

- `mkdir`: 新しいフォルダを作成
- `cp`: ファイルをコピー（copy）
  - `map-1/*`: map-1 フォルダ内のすべてのファイル（\*はワイルドカード）
  - `map-original/`: コピー先のフォルダ

:::

<br />

## マップの仕組みを理解しよう

`map-original` フォルダの `map.js` ファイルを開いて、マップがどのような仕組みでできているか見てみましょう。

```javascript:map-original/map.js
export const mapConfig = {
  cell: {
    s: { type: 'start', color: '#6B7ADB', description: 'スタート地点' },
    e: { type: 'end', color: '#F59E0B', description: 'お宝の場所' },
    t: { type: 'trap', color: '#DC2626', description: 'トラップ' },
    o: { type: 'object', color: '#92400E', description: 'オブジェクト（土管）' },
    n: { type: 'normal', color: '#D4A574' },
  },
  layout: [
    ['s', 'n', 'n', 'n', 'n', 't'],
    ['n', 'n', 'o', 'n', 'n', 'n'],
    ['n', 'n', 'n', 'n', 'n', 'n'],
    ['n', 'n', 'n', 't', 'n', 'n'],
    ['n', 'n', 'n', 'n', 'n', 'n'],
    ['o', 'n', 'n', 'n', 'n', 'e'],
  ],
};
```

マップは `cell` と `layout` の 2 つの要素で構成されています。

- **`cell`**: マップに配置する「部品」の種類を決めるところです。
- **`layout`**: `cell` で決めた部品を、実際に地図のように並べるところです。

--- > ---
（ここに `cell` と `layout` の関係を示す図を挿入。左側に `cell` のコード、右側に `layout` のコードを配置し、`cell` で定義した `s` や `n` などの記号が `layout` で使われていることを矢印で示すような図）
--- > ---

`cell` で「`s` はスタート地点」「`n` は道」のように部品の役割を決めておき、`layout` でその部品（記号）を並べてマップの形を作っている、とイメージすると分かりやすいでしょう。

<br />

## マップデータを編集する

それでは、実際にマップデータを編集してみましょう！

### 例： 道を壁に変えてみよう

例えば、道 `n` の一つを壁 `o` に変えるだけでも、AI が通れない道ができて、ルートが大きく変わります。

`layout` の中にある `n` を、どこか一つ `o` に書き換えてみましょう。どこを変えるかで、AI の動きがどう変わるか、ぜひ試してみてください！

--- > ---
（ここに、`layout` の `n` の一つを `o` に書き換えている様子の GIF アニメーションを挿入。書き換えた後、ブラウザでリロードするとマップの壁が増えている様子を見せる）
--- > ---

このように、少し変えるだけでもマップの構造が変わります。
ぜひ、自分だけのマップ作りに挑戦してみてください！

### アレンジのアイデア

- スタート `s` やゴール `e` の位置を変えてみる
- トラップ `t` を置いてみる
- もっと大きなマップにしてみる（配列の数を増やす）

<br />

## トラブルシューティング

何か問題が発生した場合は、以下を参考にしてください！

:::details A. マップが表示されない

**原因**: `map.js` の記号と定義が一致していない可能性があります。

**対処法**: `layout` で使っている記号（例: `'w'`）が、`cell` で定義されているか確認してください。ブラウザの開発者ツール（F12 キーで開けます）の「コンソール」タブでエラーメッセージを確認し、どの記号が問題か特定しましょう。

:::

:::details B. 巨大マップでブラウザが重い

**原因**: マップサイズが大きすぎて、パソコンの処理が追いついていない可能性があります。

**対処法**: 「まずは小さいマップで試してから、徐々に大きくしていこう」とアドバイスしてみてください。20x20 マス程度を上限の目安として伝えると良いでしょう。

:::
