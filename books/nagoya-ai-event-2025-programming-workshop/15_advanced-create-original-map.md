---
title: '🩷 オリジナルマップを作ろう'
---

## オリジナルマップを作ろう

では、ここからは JavaScript を編集して、自分だけのオリジナルマップを作ってみましょう！

<br />

## 新しいマップフォルダを作成する

ではさっそく `map-original` フォルダを作成します！

VSCode の下のパネルに「ターミナル」が表示されていることを確認してください！\
もし表示されていなければ、以下のショートカットキーでターミナルを開きます！

- **Windows の場合**: `Ctrl + j`
- **Mac の場合**: `⌘ (Command) + j`

お使いのパソコンに合わせて、以下のコマンドをコピーしてターミナルに貼り付け、Enter キーを押してください！

**PowerShell(Windows) の場合**

```powershell
New-Item -ItemType Directory -Name "map-original"
Copy-Item -Path "map-1/*" -Destination "map-original/" -Recurse
```

:::details コマンドプロンプト(Windows) の場合

```bash
mkdir map-original
copy map-1/* map-original/
```

:::

:::details シェル(Mac,Linux) の場合

```bash
mkdir map-original
cp map-1/* map-original/
```

:::

:::details 【深く知りたい人向け】コマンドの解説

**PowerShell**
- `New-Item -ItemType Directory`: 新しいフォルダを作成
- `Copy-Item`: ファイルやフォルダをコピー
  - `-Path "map-1/*"`: map-1 フォルダ内のすべてのファイルを指定
  - `-Destination`: コピー先を指定
  - `-Recurse`: サブフォルダも含めてコピー

<br />

**コマンドプロンプト**
- `mkdir`: 新しいフォルダを作成
- `copy`: ファイルをコピー
  - `map-1/*`: map-1 フォルダ内のすべてのファイル
  - `map-original/`: コピー先のフォルダ

<br />

**シェル（Mac/Linux）**
- `mkdir`: 新しいフォルダを作成
- `cp`: ファイルをコピー（copy）
  - `map-1/*`: map-1 フォルダ内のすべてのファイル（*はワイルドカード）
  - `map-original/`: コピー先のフォルダ

:::

<br />

## オリジナルマップのアイデア

まずは、どんなマップを作りたいか、アイデアを考えてみましょう！

### アイデアの例

1. **巨大マップ**

   - 10×10 以上の大きなマップ
   - 複数のルートがある
   - 迷いやすい構造

2. **障害物マップ**

   - トラップがたくさんある
   - 安全な道は少ない
   - 慎重な進行が必要

3. **シンプルマップ**
   - 5×5 程度の小さめのマップ
   - ゴールまでの道が分かりやすい
   - 初心者向け

<br />

## マップデータを作成する

`map-original` フォルダの `map.js` ファイルを開いて、オリジナルのマップデータを作りましょう！

### マップの記号の意味

マップは、文字を使って作ります。

- `n`: 道
- `o`: 壁
- `s`: スタート地点
- `e`: ゴール地点
- `t`: トラップ

### 例： シンプルなマップ

```javascript
export const mapConfig = {
  layout: [
    ['o', 'o', 'o', 'o', 'o', 'o', 'o'],
    ['o', 's', 'n', 'n', 'n', 'n', 'o'],
    ['o', 'o', 'o', 'n', 'o', 'n', 'o'],
    ['o', 'n', 'n', 'n', 'o', 'n', 'o'],
    ['o', 'n', 'o', 'o', 'o', 'n', 'o'],
    ['o', 'n', 'n', 'n', 'n', 'e', 'o'],
    ['o', 'o', 'o', 'o', 'o', 'o', 'o'],
  ],
  cell: {
    o: {
      type: 'object',
      color: '#333333',
    },
    n: {
      type: 'normal',
      color: '#ffffff',
    },
    s: { type: 'start', color: '#00ff00' },
    e: { type: 'end', color: '#ff0000' },
    t: { type: 'trap', color: '#000000' },
  },
};
```

### マップ作成のコツ

1. **周りを壁で囲む**

   - マップの外側は必ず `o`（壁）で囲む
   - プレイヤーが外に出ないようにする

2. **スタートとゴールは 1 つずつ**

   - `s`（スタート）は 1 つだけ
   - `e`（ゴール）も 1 つだけ

3. **道がつながっているか確認**
   - スタートからゴールまで、必ず道（`n`）でつながっている
   - 行き止まりがあってもよい

<br />

## トラブルシューティング

### エラーが出た場合

1. **マップが表示されない**

   - map.js の記述にミスがないか確認
   - カンマや引用符が正しいか確認
   - ブラウザの開発者ツール（F12）でエラーを確認

2. **AI が動かない**

   - ai-route-prompt.js の記述を確認
   - ネットワーク接続を確認
   - API キーが正しく設定されているか確認

3. **プレイヤーがおかしな動きをする**
   - マップのレイアウトを確認
   - スタートとゴールの位置を確認
   - 道がちゃんとつながっているか確認
